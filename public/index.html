<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  
  <header>
    <h1 class="title">
      ボッチ用無限しりとり
    </h1>
  </header>

  <form oninput="o=a">
  <div class="card-container">
    <div class="setumei">
      <h2 class="setumei1" style="line-height:1;">
        ＜概要＞<br>
        ・このゲームはボッチの人が時間をつぶせるように作ったものです<br>
        ・タイピングの練習をするためにも使えます<br>
        ・自身の語彙力の幅を広げる事にも使えます。<br>
      </h2>
      <h3 class="setumei2" style="line-height:1;">
        ＜ルール説明＞<br>
        ・ボッチのためのモノであり、対戦相手はいません。<br>
        ・常に自分で返しつ付けてください。<br>
        ・ひらがなしか受け付けません。<br>
        ・基本的には普通のしりとりと変わりません。<br>
        ・同じ言葉は繰り返し使えます。<br>
        ・最後に「ん」の付く言葉は入力できません。<br>
      </h3>

      <div class="tango">
        <p class="tango1" id="previousWord" style="line-height:0;">
        </p>
        <input id="nextWordInput" type="text" />
        <button id="nextWordSendButton">
          送信
        </button>
      </div>
  
    </div>

    <div class="box">
      <div class="log body"  align="right">
        <output  id="output1" style="line-height:0;" >
        </output>
      </div>
    </div>
    
    <p class="gif">
      <img src="帽子.gif" alt="サンプル" width="80px" heigh="80px">
    </p>

　</div>
　</from>

  <script type="module">
    window.onload = async (event) => {
          const response = await fetch("/shiritori");
          const previousWord = await response.text();

        const para = document.querySelector("#previousWord");
        para.innerText = `前の単語：${previousWord}`;
    };
    document.querySelector("#nextWordSendButton").onclick = async (event) => {
        const nextWord = document.querySelector("#nextWordInput").value;
        const response = await fetch("/shiritori", {
            method: "POST",
              headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ nextWord })
            });
            if (response.status / 100 !== 2) {
                alert(await response.text());
                return;
            }
            const previousWord = await response.text();

            const para = document.querySelector("#previousWord");
            para.innerText = `前の単語：${previousWord}`;
  　};
    var output1;
    output1.value = previousWord;
  </script>
</body>

</html>
